<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<title>Movebank Part I: database summary and downloading a study - Cabinet of Curiosity</title>

  <!-- Edit site and author settings in `_config.yml` to make the social details your own -->

    <meta content="Cabinet of Curiosity" property="og:site_name">
  
    <meta content="Movebank Part I: database summary and downloading a study" property="og:title">
  
  
    <meta content="article" property="og:type">
  
  
    <meta content="Exploring the data of natural history." property="og:description">
  
  
    <meta content="http://localhost:4000/movebank-part1/" property="og:url">
  
  
    <meta content="2018-04-05T14:00:00-07:00" property="article:published_time">
    <meta content="http://localhost:4000/about/" property="article:author">
  
  
    <meta content="http://localhost:4000/assets/img/jackal_skull.jpg" property="og:image">
  
  
    
  
  
    
  

    <meta name="twitter:card" content="summary">
    <meta name="twitter:site" content="@">
    <meta name="twitter:creator" content="@ofcuriositydata">
  
    <meta name="twitter:title" content="Movebank Part I: database summary and downloading a study">
  
  
    <meta name="twitter:url" content="http://localhost:4000/movebank-part1/">
  
  
    <meta name="twitter:description" content="Exploring the data of natural history.">
  
  
    <meta name="twitter:image:src" content="http://localhost:4000/assets/img/jackal_skull.jpg">
  

	<meta name="description" content="">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
	<meta property="og:image" content="">
	<link rel="shortcut icon" href="/assets/img/favicon/favicon.ico" type="image/x-icon">
	<link rel="apple-touch-icon" href="/assets/img/favicon/apple-touch-icon.png">
	<link rel="apple-touch-icon" sizes="72x72" href="/assets/img/favicon/apple-touch-icon-72x72.png">
	<link rel="apple-touch-icon" sizes="114x114" href="/assets/img/favicon/apple-touch-icon-114x114.png">
	<!-- Chrome, Firefox OS and Opera -->
	<meta name="theme-color" content="#263959">
	<!-- Windows Phone -->
	<meta name="msapplication-navbutton-color" content="#263959">
	<!-- iOS Safari -->
	<meta name="apple-mobile-web-app-status-bar-style" content="#263959">
	<!-- Google Fonts -->
	<link href="https://fonts.googleapis.com/css?family=PT+Serif:400,700" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css?family=Lato:300,400,700" rel="stylesheet">
	<!-- Font Awesome -->
	<link rel="stylesheet" href="/assets/fonts/font-awesome/css/font-awesome.min.css">
	<!-- Styles -->
	<link rel="stylesheet" href="/assets/css/main.css">
</head>

<body>

  <div class="wrapper">
    <aside class="sidebar">
  <header>
    <div class="about">
      <div class="cover-author-image">
        <a href="/"><img src="/assets/img/david-freeman.jpg" alt="Cabinet of Curiosity"></a>
      </div>
      <div class="author-name">Cabinet of Curiosity</div>
      <p>Exploring the data of natural history</p>
    </div>
  </header> <!-- End Header -->
  <footer>
    <section class="contact">
      <h3 class="contact-title">About</h3>
      <center><p><a href="/about" target="_blank"><img src="/assets/img/about_icon.png" alt="" height="18" width="18" </a></a></p></center>
    </section>
    <section class="contact">
      <h3 class="contact-title">Contact Us</h3>
      <ul>
        
          <li><a href="https://twitter.com/ofcuriositydata" target="_blank"><i class="fa fa-twitter" aria-hidden="true"></i></a></li>
        
        
          <li class="github"><a href="http://github.com/cabinetofcuriosity" target="_blank"><i class="fa fa-github"></i></a></li>
        
        
          <li class="email"><a href="mailto:ofcuriositydata"><i class="fa fa-envelope-o"></i></a></li>
        
      </ul>
    </section> <!-- End Section Contact -->
    <div class="copyright">
      <p>2018 &copy; Cabinet of Curiosity</p>
    </div>
  </footer> <!-- End Footer -->
</aside> <!-- End Sidebar -->
<div class="content-box clearfix">
  <article class="article-page">
  <div class="page-content">
    
    <div class="page-cover-image">
      <img class="page-image" src=/assets/img/jackal_skull.jpg alt="Movebank Part I: database summary and downloading a study">
    </div> <!-- End Page Cover Image -->
    
    <div class="wrap-content">
      <header class="header-page">
        <h1 class="page-title">Movebank Part I: database summary and downloading a study</h1>
        <div class="page-date"><span>2018, Apr 05&nbsp;&nbsp;&nbsp;&nbsp;</span></div>
      </header>
      <p>The next biological data source that we are going to investigate is <a href="https://www.movebank.org/">Movebank</a>. They say what they are best:</p>

<blockquote>
  <p>We help animal tracking researchers to manage, share, protect, analyze, and archive their data. The animal tracking data in Movebank belongs to researchers all over the world who choose whether and how to share their data with the public.</p>
</blockquote>

<p>Movebank is hosted by the <a href="http://www.orn.mpg.de/en">Max Planck Institude for Ornithology</a>, and, anecdotally, many of the data sets available are of birds species.
The general model of Movebank is that the researchers who do submit their data retain ownership and have a choice to make their data publicly available.
And, the owners of the data specify the terms of use.</p>

<p>This is a little different than some other databases I’ve seen, but also often the data involved can represent years of work in the field.
It also made accessing and interacting with the data on a bulk scale difficult and next to impossible, but we’ll get to that.</p>

<p>The data in Movebank is <strong>cool</strong>. I was inspired by the book <a href="http://wheretheanimalsgo.com/">Where Animals Go</a>, which one my advisers in graduate school gave to me as a parting gift.
It’s an incredible book and I was struck by how beautiful and informative the tracking data for animals was.
It’s an intimate look at how animals behave, and presents some cool opportunities for data visualization, statistical analysis, and modeling.</p>

<p>The breakdown of accessing and analyzing Movebank data will take place in several parts.
Part I, this post, will discuss how to access and download data from Movebank, and show what type of data variables you can expect to find.
Later parts will discuss parsing date and time data, and increase the complexity of data analysis and modeling.</p>

<h2 id="become-a-movebank-user">Become a Movebank user</h2>

<p>In order to download data from Movebank directly, you must be a user. 
Become a user is free, and you can sign up <a href="https://www.movebank.org/user/register">here</a>.</p>

<p>To follow along with this series of posts, we will make the data available for the rest of the tutorial.</p>

<p>The data we’re using falls under the general Movebank Terms of Use, which you can read <a href="https://www.movebank.org/node/1934">here</a>.
We are not using this data for any commercial use, and only intend it to show what Movebank has to offer, and to show some cool R libraries for data analysis and visualizations.</p>

<h1 id="accessing-movebank-data">Accessing Movebank Data</h1>

<h2 id="installing-move">Installing <code class="highlighter-rouge">move</code></h2>

<p><em>Note</em>: If you just want to download the data and don’t care about how we accessed Movebank, skip to the summarizing data section. We just use <code class="highlighter-rouge">move</code> to download data, and not for analysis.</p>

<p>To access data on movebank, you can interact with the <a href="https://www.movebank.org/panel_embedded_movebank_webapp">Movebank Tracking Data Map</a>, which is quite fun.</p>

<p>And there is also an R package that will interact with the website called, appropriately, <a href="https://cran.r-project.org/web/packages/move/index.html"><code class="highlighter-rouge">move</code></a>.</p>

<p>However, it has a dependency that was not straightforward for me to download. 
There is an R package called rgdal, which requires the software <a href="http://www.gdal.org/">GDAL</a>, Geospatial Data Abstraction Library.</p>

<p>To install this, I used <a href="https://brew.sh/">homebrew</a>, which is an incredible tool to install software if you are not familiar with it.</p>

<p>I used the brew recipe.  Type in your terminal (not in R):</p>

<pre><code class="language-{}">brew install gdal
</code></pre>

<p>This worked well for me, and after this I was able to install <code class="highlighter-rouge">rgdal</code> and <code class="highlighter-rouge">move</code> without a problem:</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">install.packages</span><span class="p">(</span><span class="s2">"rgdal"</span><span class="p">)</span><span class="w">
</span><span class="n">install.packages</span><span class="p">(</span><span class="s2">"move"</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<p>Post any issues you have installing these libraries in the comments bellow and we’ll try to help you out!</p>

<p>If everything has been installed correctly - load the move library:</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">library</span><span class="p">(</span><span class="n">move</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<h1 id="getting-to-know-move">Getting to know <code class="highlighter-rouge">move</code></h1>

<p>As Ciera did with <a href="link to post">neomata</a> and <a href="link to post">taxize</a>, I’m going to take a few moments to show what I learned while getting familiar with the library <code class="highlighter-rouge">move</code>.
This is a pretty big part of becoming good at certain functions and libraries - to read the manuals, do any provided or discovered tutorials, and to just <em>play</em> with the library.</p>

<p><code class="highlighter-rouge">move</code> provides the ability to access Movebank, which is useful, and it also uses other libraries and the GDAL to analyze the GPS data, which is new to me.
Here’s a <a href="https://cran.r-project.org/web/packages/move/vignettes/move.pdf">link to manual</a>.</p>

<p>Create an object to store your Movebank login information.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">#fill in your username and passwords here</span><span class="w">
</span><span class="n">loginStored</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">movebankLogin</span><span class="p">(</span><span class="n">username</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&lt;</span><span class="n">username</span><span class="o">&gt;</span><span class="p">,</span><span class="w"> </span><span class="n">password</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&lt;</span><span class="n">password</span><span class="o">&gt;</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<p>The organization of the data in Movebank is centralized around each study, and researchers can upload their data from various different types of sensors.
We are going to be focusing on GPS sensors, but there are also accelerometers, radio transmitters, Argos Doppler, barometers, bind ring (I don’t know what that is but it sounds cool), solar geolocator, and good ol’ natural mark recording with human eyeballs.</p>

<p>It’s useful to know the scope of the database you are searching. 
I initially thought I could get clever and get all the animals found in Movebank by getting all the study ids (with a combination of the functions <code class="highlighter-rouge">getMovebankStudies()</code> and <code class="highlighter-rouge">getMovebankID()</code>), but you cannot get around their data sharing policy that way.
Any study you may want to download, you must go online and agree to the terms for using that data before completing the download here in R.</p>

<p>But we can get basic information on all of the studies that allow some kind of access to their data using the <code class="highlighter-rouge">getMovebank()</code> function:</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">all_studies</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">getMovebank</span><span class="p">(</span><span class="n">entity_type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"study"</span><span class="p">,</span><span class="w"> </span><span class="n">login</span><span class="o">=</span><span class="n">loginStored</span><span class="p">)</span><span class="w">
</span><span class="nf">dim</span><span class="p">(</span><span class="n">all_studies</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>## [1] 2413   28
</code></pre></div></div>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">head</span><span class="p">(</span><span class="n">all_studies</span><span class="o">$</span><span class="n">name</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>## [1] Army Ant colony movement Touchton    
## [2] Christmas Island Red Crabs           
## [3] Sooty Falcon Javed UAE               
## [4] bird                                 
## [5] Dalmatian Pelicans Ortaç Onmuş Turkey
## [6] Taita Hills birds project, Kenya     
## 2350 Levels: _dcd_test_dup_location_1sec_offset ...
</code></pre></div></div>
<p>Hmmm, looking at some of these study names, the authors of those studies don’t seem to have practiced any type of repeating, standard naming procedure. That would make it difficult to parse out all animal names - and so could be a project for a later date.</p>

<p>Something we can do is map where these studies generally take place.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">library</span><span class="p">(</span><span class="n">ggplot2</span><span class="p">)</span><span class="w">
</span><span class="n">world</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">map_data</span><span class="p">(</span><span class="s2">"world"</span><span class="p">)</span><span class="w">

</span><span class="n">ggplot</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">geom_polygon</span><span class="p">(</span><span class="n">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">world</span><span class="p">,</span><span class="w">
               </span><span class="n">fill</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"grey38"</span><span class="p">,</span><span class="w">
               </span><span class="n">aes</span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">long</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">lat</span><span class="p">,</span><span class="w"> </span><span class="n">group</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">group</span><span class="p">))</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">geom_point</span><span class="p">(</span><span class="n">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">all_studies</span><span class="p">,</span><span class="w"> 
             </span><span class="n">aes</span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">main_location_long</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">main_location_lat</span><span class="p">,</span><span class="w"> </span><span class="n">color</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">as.factor</span><span class="p">(</span><span class="n">there_are_data_which_i_cannot_see</span><span class="p">)))</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">scale_color_discrete</span><span class="p">(</span><span class="n">guide</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">guide_legend</span><span class="p">(</span><span class="n">title</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Data Restrictions"</span><span class="p">))</span><span class="w">
</span></code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>## Warning: Removed 3 rows containing missing values (geom_point).
</code></pre></div></div>

<p><img src="../assets/img/2018-04-03-movebank-part1_files/figure-html/unnamed-chunk-6-1.png" alt="" /><!-- --></p>

<p>The color of these points indicates if there are any restrictions on the availability of the data. Anything labeled false has all the data available.
There are 435 studies that have all of their data available for download (after agreeing to the general Movebank privacy).</p>

<p>We can also examine the different types of sensors used in Movebank:</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">getMovebank</span><span class="p">(</span><span class="s2">"tag_type"</span><span class="p">,</span><span class="w"> </span><span class="n">loginStored</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>##    description            external_id       id is_location_sensor
## 1           NA              bird-ring      397               true
## 2           NA                    gps      653               true
## 3           NA      radio-transmitter      673               true
## 4           NA    argos-doppler-shift    82798               true
## 5           NA           natural-mark  2365682               true
## 6           NA           acceleration  2365683              false
## 7           NA       solar-geolocator  3886361               true
## 8           NA accessory-measurements  7842954              false
## 9           NA   solar-geolocator-raw  9301403              false
## 10          NA              barometer 77740391              false
## 11          NA           magnetometer 77740402              false
##                      name
## 1               Bird Ring
## 2                     GPS
## 3       Radio Transmitter
## 4     Argos Doppler Shift
## 5            Natural Mark
## 6            Acceleration
## 7        Solar Geolocator
## 8  Accessory Measurements
## 9    Solar Geolocator Raw
## 10              Barometer
## 11           Magnetometer
</code></pre></div></div>

<p>This returns a table with the different types of sensors, and a numeric tag assigned to each sensor. 
Unfortunately, at this time I don’t see how to filter the studies by sensor type without first selecting a specific study. 
Which is a bummer, because I’m pretty curious about these bird-ring sensors, and would like to filter the studies based on that!</p>

<p>Besides filtering the downloaded database above, we can also use the <code class="highlighter-rouge">searchMovebankStudies()</code> function to search for terms in study names.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">searchMovebankStudies</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s2">"coyote"</span><span class="p">,</span><span class="w"> </span><span class="n">login</span><span class="o">=</span><span class="n">loginStored</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>## [1] "Site fidelity in cougars and coyotes, Utah/Idaho USA (data from Mahoney et al. 2016)"
</code></pre></div></div>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">head</span><span class="p">(</span><span class="n">searchMovebankStudies</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s2">"oose"</span><span class="p">,</span><span class="w"> </span><span class="n">loginStored</span><span class="p">))</span><span class="w">
</span></code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>## [1] "ABoVE: NPS Moose in the Upper Koyokuk Alaska"          
## [2] "ABoVE: Peters Hebblewhite Alberta-BC Moose"            
## [3] "Barnacle goose (Greenland)   Larry Griffin/David Cabot"
## [4] "Barnacle goose (Svalbard)    Larry Griffin"            
## [5] "Bean Goose Anser fabalis Finnmark."                    
## [6] "Bean Goose QIA KoEco China 2015 FAO"
</code></pre></div></div>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">head</span><span class="p">(</span><span class="n">searchMovebankStudies</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s2">"bird"</span><span class="p">,</span><span class="w"> </span><span class="n">login</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">loginStored</span><span class="p">))</span><span class="w">
</span></code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>## [1] "2018 Magnificent Frigatebird - Cayman Islands "                       
## [2] "African riparian birds Kenya"                                         
## [3] "AKseabird"                                                            
## [4] "All CTT birds deployed BOEM"                                          
## [5] "Antbirds, Panama"                                                     
## [6] "Arctic breeding shorebirds; Rausch; various Canadian arctic locations"
</code></pre></div></div>

<p>So many studies to chose from!</p>

<p>Get the study ID to see how many animals are in the study.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">ID</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">getMovebankID</span><span class="p">(</span><span class="n">study</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Black-backed jackal, Etosha National Park, Namibia"</span><span class="p">,</span><span class="w"> </span><span class="n">login</span><span class="o">=</span><span class="n">loginStored</span><span class="p">)</span><span class="w">
</span><span class="n">head</span><span class="p">(</span><span class="n">getMovebankAnimals</span><span class="p">(</span><span class="n">study</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ID</span><span class="p">,</span><span class="w"> </span><span class="n">login</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">loginStored</span><span class="p">))</span><span class="w">
</span></code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>##   individual_id    tag_id sensor_type_id tag_local_identifier
## 1     346406120 304884475            653                AU200
## 2     346406121 304884486            653                AU205
## 3     346406122 304884490            653                AU206
## 4     346406123 304884493            653                AU215
## 5     346406124 304884496            653                AU210
## 6     346406125 304884499            653                AU211
##   deployment_id comments death_comments earliest_date_born
## 1     346406151       NA             NA                 NA
## 2     346406161       NA             NA                 NA
## 3     346406150       NA             NA                 NA
## 4     346406167       NA             NA                 NA
## 5     346406158       NA             NA                 NA
## 6     346406156       NA             NA                 NA
##   exact_date_of_birth latest_date_born local_identifier nick_name ring_id
## 1                  NA               NA             CM05        NA      NA
## 2                  NA               NA             CM08        NA      NA
## 3                  NA               NA             CM09        NA      NA
## 4                  NA               NA             CM10        NA      NA
## 5                  NA               NA             CM11        NA      NA
## 6                  NA               NA             CM15        NA      NA
##   sex taxon_canonical_name     animalName
## 1   m                   NA CM05_346406151
## 2   m                   NA CM08_346406161
## 3   m                   NA CM09_346406150
## 4   m                   NA CM10_346406167
## 5   m                   NA CM11_346406158
## 6   m                   NA CM15_346406156
</code></pre></div></div>

<p>I like this study because it has many individuals, and their genders are identified. 
Many studies on Movebank are of a small number, one or two, and the information about the animals is not always available. 
Also, I’ve always kind of liked jackals, in a romantic, scrappy under-dog way. I really like coyotes, and they kind of seem like coyotes to me. Good enough! Let’s download.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># be patient</span><span class="w">
</span><span class="n">jackals</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">getMovebankData</span><span class="p">(</span><span class="n">study</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Black-backed jackal, Etosha National Park, Namibia"</span><span class="p">,</span><span class="w"> </span><span class="n">login</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">loginStored</span><span class="p">,</span><span class="w"> </span><span class="n">removeDuplicatedTimestamps</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">TRUE</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<p>If you’re following along, this was a pretty slow step for me.
Also, there is a warning about the option <code class="highlighter-rouge">removeDuplicatedTimestamps = TRUE</code>, however the data download fails if this is set to false.</p>

<p>This step returned a <code class="highlighter-rouge">move</code> object which seems to have a lot of excess information. Right now, all I want is information about the individuals they retrieved data from, and the location data over time, and the information to connect them.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">idData</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">jackals</span><span class="o">@</span><span class="n">idData</span><span class="w">
</span><span class="n">jackal_movement</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">jackals</span><span class="o">@</span><span class="n">data</span><span class="w">
</span><span class="n">jackal_id_movement</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">jackals</span><span class="o">@</span><span class="n">trackId</span><span class="w">
</span><span class="n">jackal_movement</span><span class="o">$</span><span class="n">local_identifier</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">jackal_id_movement</span><span class="w">
</span><span class="n">str</span><span class="p">(</span><span class="n">jackal_movement</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>## 'data.frame':	130686 obs. of  10 variables:
##  $ sensor_type_id  : int  653 653 653 653 653 653 653 653 653 653 ...
##  $ location_lat    : num  -19.1 -19.1 -19.1 -19.1 -19 ...
##  $ location_long   : num  15.8 15.8 15.8 15.8 15.8 ...
##  $ timestamp       : POSIXct, format: "2009-02-07 00:01:20" "2009-02-07 01:00:38" ...
##  $ update_ts       : Factor w/ 1 level "2017-09-05 17:41:27.589": 1 1 1 1 1 1 1 1 1 1 ...
##  $ deployment_id   : int  346406151 346406151 346406151 346406151 346406151 346406151 346406151 346406151 346406151 346406151 ...
##  $ event_id        : num  3.65e+09 3.65e+09 3.65e+09 3.65e+09 3.65e+09 ...
##  $ tag_id          : int  304884475 304884475 304884475 304884475 304884475 304884475 304884475 304884475 304884475 304884475 ...
##  $ sensor_type     : Factor w/ 1 level "GPS": 1 1 1 1 1 1 1 1 1 1 ...
##  $ local_identifier: Factor w/ 22 levels "CM05","CM08",..: 1 1 1 1 1 1 1 1 1 1 ...
</code></pre></div></div>

<p>This has created a data frame what has 130,686 rows, where each row contains the GPS location of an individual at a point in time.</p>

<p>Overall, I found interacting with the <code class="highlighter-rouge">move</code> library to be kind of frustrating. 
I really want to search through what a database has available and download a data frame without any bells and whistles. If you know what data set you want, going to the website and downloading the data through their data browsers gives you a flat comma separated file that is much easier to work with.</p>

<h1 id="summarizing-and-cleaning-data">Summarizing and cleaning data</h1>

<p>Download the dataset I just created as a comma separated file here: <a href="https://cabinetofcuriosity.github.io/cabinetofcuriosity_site/assets/downloads/black-backed-jackal-Namibia.csv">black-backed-jackal-Namibia.csv</a></p>

<p>Create the <code class="highlighter-rouge">jackal_movement</code> data frame by reading the dataset into R:</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">jackal_movement</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">read.table</span><span class="p">(</span><span class="n">file</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"black-backed-jackal-Namibia.csv"</span><span class="p">,</span><span class="w"> </span><span class="n">header</span><span class="o">=</span><span class="nb">T</span><span class="p">,</span><span class="w"> </span><span class="n">sep</span><span class="o">=</span><span class="s2">","</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>
<p>Once you have acquired the data, the next step is to get a sense of what you can expect from the data, and if there are any missing values or weird-looking outlier data.</p>

<p>First, I usually like to get an idea of what types of values my data frame currently contains, and if I need to transform those values at all.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">str</span><span class="p">(</span><span class="n">jackal_movement</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>## 'data.frame':	130686 obs. of  10 variables:
##  $ sensor_type_id  : int  653 653 653 653 653 653 653 653 653 653 ...
##  $ location_lat    : num  -19.1 -19.1 -19.1 -19.1 -19 ...
##  $ location_long   : num  15.8 15.8 15.8 15.8 15.8 ...
##  $ timestamp       : POSIXct, format: "2009-02-07 00:01:20" "2009-02-07 01:00:38" ...
##  $ update_ts       : Factor w/ 1 level "2017-09-05 17:41:27.589": 1 1 1 1 1 1 1 1 1 1 ...
##  $ deployment_id   : int  346406151 346406151 346406151 346406151 346406151 346406151 346406151 346406151 346406151 346406151 ...
##  $ event_id        : num  3.65e+09 3.65e+09 3.65e+09 3.65e+09 3.65e+09 ...
##  $ tag_id          : int  304884475 304884475 304884475 304884475 304884475 304884475 304884475 304884475 304884475 304884475 ...
##  $ sensor_type     : Factor w/ 1 level "GPS": 1 1 1 1 1 1 1 1 1 1 ...
##  $ local_identifier: Factor w/ 22 levels "CM05","CM08",..: 1 1 1 1 1 1 1 1 1 1 ...
</code></pre></div></div>

<p>My data frame is a mix of integers, numeric values, factors, and POSIXct values, which we will explain in more detail in a later post.</p>

<p>It’s really important to check for missing values, and to get a sense of the range of values in your data set. As Ciera introduced in the previous posts, the <code class="highlighter-rouge">skimr</code> package is really wonderful for this.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">library</span><span class="p">(</span><span class="n">skimr</span><span class="p">)</span><span class="w">

</span><span class="n">skim</span><span class="p">(</span><span class="n">jackal_movement</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>## Skim summary statistics
##  n obs: 130686 
##  n variables: 10 
## 
## Variable type: factor 
##          variable missing complete      n n_unique
##  local_identifier       0   130686 130686       22
##       sensor_type       0   130686 130686        1
##         update_ts       0   130686 130686        1
##                                      top_counts ordered
##  CM0: 11827, CM1: 11508, CM4: 11358, CM1: 11148   FALSE
##                              GPS: 130686, NA: 0   FALSE
##                              201: 130686, NA: 0   FALSE
## 
## Variable type: integer 
##        variable missing complete      n        mean    sd          p0
##   deployment_id       0   130686 130686     3.5e+08  5.42     3.5e+08
##  sensor_type_id       0   130686 130686   653        0      653      
##          tag_id       0   130686 130686 3e+08       23.66 3e+08      
##          p25      median         p75        p100     hist
##      3.5e+08     3.5e+08     3.5e+08     3.5e+08 ▅▂▃▇▆▆▇▂
##    653         653         653         653       ▁▁▁▇▁▁▁▁
##  3e+08       3e+08       3e+08       3e+08       ▃▇▃▇▃▆▁▅
## 
## Variable type: numeric 
##       variable missing complete      n      mean        sd        p0
##       event_id       0   130686 130686   3.7e+09 37726.81    3.7e+09
##   location_lat       0   130686 130686 -19.11        0.066 -19.31   
##  location_long       0   130686 130686  15.87        0.12   15.46   
##        p25    median       p75      p100     hist
##    3.7e+09   3.7e+09   3.7e+09   3.7e+09 ▇▇▇▇▇▇▇▇
##  -19.16    -19.12    -19.06    -18.81    ▁▂▇▆▅▁▁▁
##   15.78     15.89     15.96     16.09    ▁▁▁▃▂▇▂▃
## 
## Variable type: POSIXct 
##   variable missing complete      n        min        max     median
##  timestamp       0   130686 130686 2009-02-07 2011-01-16 2009-10-11
##  n_unique
##    112242
</code></pre></div></div>

<p><code class="highlighter-rouge">skim()</code> automatically splits up my data by variable type and summarizes each type, and packs a ton of information into the summary.
What I can quickly see is that I have no missing values for any of my variables - this is good! But you’re not done quite yet.
Reading in data can make quite a few assumptions about what is and what is not labeled a missing value. 
Here, a missing value is an <code class="highlighter-rouge">NA</code>, but what if someone spelled out <code class="highlighter-rouge">not available</code> and put that into the data set? Or <code class="highlighter-rouge">missing</code> or just left it blank. We’ll quickly check for these situations in a quick and dirty way.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">table</span><span class="p">(</span><span class="n">jackal_movement</span><span class="o">$</span><span class="n">local_identifier</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>## 
##  CM05  CM08  CM09  CM10  CM11  CM15  CM18  CM20  CM23  CM26  CM33  CM36 
##  1873  3374 11827  1235 11508 11148   884   712  1481 10795  5522  3128 
##  CM40  CM42  CM44  CM47  CM62  CM69  CM70  CM72  CM83  CM95 
##  7311  2662  9914 11358  9532 10025  3982  2875  8101  1439
</code></pre></div></div>

<p>I use table to visually see what factors I have for a variable, and it’s helpful to see the distribution of data for each factor. Here, we know that all of the local identifiers have some even and predictable naming scheme, that there are no totally mis-labeled factors, and that the data is not evenly distributed between the individual jackals. 
Some jackals had their GPS trackers on for much longer than others.</p>

<p>I’m not going to check the other factors with <code class="highlighter-rouge">table()</code>, because I can see that they only have one value and that it is complete.</p>

<p>I can also use the <code class="highlighter-rouge">skim()</code> results to to check on the integer and numeric values, and to get a sense of their distributions. 
Later, we’re mainly going to be using local identifier, event id, and the latitude and longitude information.
Deployment id and tag id seem to be associated with a specific GPS device, and provides redundant information as the local identifier.
The sensor type is a single value, which probably means GPS in this situation. (Many data sets on Movebank have different types of sensors, so that is something to pay attention to if you are downloading other data sets.)</p>

<p>The event id is a sequential number, where each row of my data set has a unique event id. This will be incredibly useful later.</p>

<p>I can use <code class="highlighter-rouge">range()</code> to verify what <code class="highlighter-rouge">skim()</code> appears to be showing for latitude and longitude - that there do not appear (at this level of analysis) to be weird ouliers.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nf">range</span><span class="p">(</span><span class="n">jackal_movement</span><span class="o">$</span><span class="n">location_lat</span><span class="p">)</span><span class="w">
</span><span class="nf">range</span><span class="p">(</span><span class="n">jackal_movement</span><span class="o">$</span><span class="n">location_long</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>## [1] -19.30973 -18.80921
## [1] 15.45767 16.08849
</code></pre></div></div>

<p>It should be said that Movebank likely has researchers clean their data before uploading it, which made this part pretty easy.
It’s never safe to assume that your data is clean! Always check it out.</p>

<h1 id="wrap-up">Wrap Up</h1>

<p>To wrap up this post, I’m going to do some pretty simple visualizations - because knowing you have a clean data set is pretty satisfying but not that visually compelling.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">library</span><span class="p">(</span><span class="n">tidyverse</span><span class="p">)</span><span class="w">
</span><span class="n">library</span><span class="p">(</span><span class="n">ggmap</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">jackal_box</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">make_bbox</span><span class="p">(</span><span class="n">lon</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">location_long</span><span class="p">,</span><span class="w"> </span><span class="n">lat</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">location_lat</span><span class="p">,</span><span class="w"> </span><span class="n">data</span><span class="o">=</span><span class="n">jackal_movement</span><span class="p">,</span><span class="w"> </span><span class="n">f</span><span class="o">=</span><span class="w"> </span><span class="m">0.1</span><span class="p">)</span><span class="w">
</span><span class="n">jackal_map</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">get_map</span><span class="p">(</span><span class="n">location</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">jackal_box</span><span class="p">,</span><span class="w"> </span><span class="n">source</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'google'</span><span class="p">,</span><span class="w"> </span><span class="n">maptype</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'terrain'</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">ggmap</span><span class="p">(</span><span class="n">jackal_map</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">geom_point</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">jackal_movement</span><span class="p">,</span><span class="w"> </span><span class="n">aes</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">location_long</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="o">=</span><span class="n">location_lat</span><span class="p">))</span><span class="w">
</span></code></pre></div></div>

<p><img src="../assets/img/2018-04-03-movebank-part1_files/figure-html/unnamed-chunk-21-1.png" alt="" /><!-- --></p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">ggmap</span><span class="p">(</span><span class="n">jackal_map</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">geom_point</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">jackal_movement</span><span class="p">,</span><span class="w"> </span><span class="n">aes</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">location_long</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="o">=</span><span class="n">location_lat</span><span class="p">,</span><span class="w"> </span><span class="n">color</span><span class="o">=</span><span class="n">local_identifier</span><span class="p">),</span><span class="w"> </span><span class="n">alpha</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0.5</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<p><img src="../assets/img/2018-04-03-movebank-part1_files/figure-html/unnamed-chunk-22-1.png" alt="" /><!-- --></p>

<p>In the next post, I will parse out the timestamp data and the fun will start with some analysis!</p>

<p><strong>Session Info:</strong></p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">Sessioninfo</span><span class="p">()</span><span class="w">
</span></code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>## R version 3.4.0 (2017-04-21)
## Platform: x86_64-apple-darwin15.6.0 (64-bit)
## Running under: OS X El Capitan 10.11.6

## Matrix products: default
## BLAS: /System/Library/Frameworks/Accelerate.framework/Versions/A/Frameworks/vecLib.framework/Versions/A/libBLAS.dylib
## LAPACK: /System/Library/Frameworks/Accelerate.framework/Versions/A/Frameworks/vecLib.framework/Versions/A/libLAPACK.dylib

## locale:
## [1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8

## attached base packages:
## [1] stats     graphics  grDevices utils     datasets  methods   base     

## other attached packages:
## [1] maps_3.2.0      ggplot2_2.2.1   move_3.0.2      rgdal_1.2-18    raster_2.6-7    sp_1.2-7       
## [7] geosphere_1.5-7

## loaded via a namespace (and not attached):
##  [1] Rcpp_0.12.16     knitr_1.20       xml2_1.2.0       magrittr_1.5     munsell_0.4.3   
##  [6] colorspace_1.3-2 lattice_0.20-35  R6_2.2.2         rlang_0.2.0      plyr_1.8.4      
## [11] stringr_1.3.0    httr_1.3.1       tools_3.4.0      parallel_3.4.0   grid_3.4.0      
## [16] gtable_0.2.0     htmltools_0.3.6  lazyeval_0.2.1   yaml_2.1.18      digest_0.6.15   
## [21] rprojroot_1.3-2  tibble_1.4.2     curl_3.1         evaluate_0.10.1  rmarkdown_1.9   
## [26] labeling_0.3     stringi_1.1.7    pillar_1.2.1     compiler_3.4.0   scales_0.5.0    
## [31] backports_1.1.2 
</code></pre></div></div>

      <div class="page-footer">
        <div class="page-share">
          <a href="https://twitter.com/intent/tweet?text=Movebank Part I: database summary and downloading a study&url=http://localhost:4000/movebank-part1/" title="Share on Twitter" rel="nofollow" target="_blank">Twitter</a>
          <a href="https://facebook.com/sharer.php?u=http://localhost:4000/movebank-part1/" title="Share on Facebook" rel="nofollow" target="_blank">Facebook</a>
          <a href="https://plus.google.com/share?url=http://localhost:4000/movebank-part1/" title="Share on Google+" rel="nofollow" target="_blank">Google+</a>
        </div>
        <div class="page-tag">
          
        </div>
      </div>
      <section class="comment-area">
  <div class="comment-wrapper">
    
    <div id="disqus_thread" class="article-comments"></div>
    <script>
      (function() {
          var d = document, s = d.createElement('script');
          s.src = '//cabinetofcuriosity.disqus.com/embed.js';
          s.setAttribute('data-timestamp', +new Date());
          (d.head || d.body).appendChild(s);
      })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    
  </div>
</section> <!-- End Comment Area -->

    </div> <!-- End Wrap Content -->
  </div> <!-- End Page Content -->
</article> <!-- End Article Page -->

</div>

  </div>
  
  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-116118773-1', 'auto');
  ga('send', 'pageview');
</script> <!-- End Analytics -->

</body>
</html>
