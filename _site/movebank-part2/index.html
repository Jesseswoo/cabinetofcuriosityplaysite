<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<title>Movebank Part II: tracking animal movement in time and space - Cabinet of Curiosity</title>

  <!-- Edit site and author settings in `_config.yml` to make the social details your own -->

    <meta content="Cabinet of Curiosity" property="og:site_name">
  
    <meta content="Movebank Part II: tracking animal movement in time and space" property="og:title">
  
  
    <meta content="article" property="og:type">
  
  
    <meta content="Exploring the data of natural history." property="og:description">
  
  
    <meta content="http://localhost:4000/movebank-part2/" property="og:url">
  
  
    <meta content="2018-04-17T14:00:00-07:00" property="article:published_time">
    <meta content="http://localhost:4000/about/" property="article:author">
  
  
    <meta content="http://localhost:4000/assets/img/wolf_BHL.jpg" property="og:image">
  
  
    
  
  
    
  

    <meta name="twitter:card" content="summary">
    <meta name="twitter:site" content="@">
    <meta name="twitter:creator" content="@ofcuriositydata">
  
    <meta name="twitter:title" content="Movebank Part II: tracking animal movement in time and space">
  
  
    <meta name="twitter:url" content="http://localhost:4000/movebank-part2/">
  
  
    <meta name="twitter:description" content="Exploring the data of natural history.">
  
  
    <meta name="twitter:image:src" content="http://localhost:4000/assets/img/wolf_BHL.jpg">
  

	<meta name="description" content="">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
	<meta property="og:image" content="">
	<link rel="shortcut icon" href="/assets/img/favicon/favicon.ico" type="image/x-icon">
	<link rel="apple-touch-icon" href="/assets/img/favicon/apple-touch-icon.png">
	<link rel="apple-touch-icon" sizes="72x72" href="/assets/img/favicon/apple-touch-icon-72x72.png">
	<link rel="apple-touch-icon" sizes="114x114" href="/assets/img/favicon/apple-touch-icon-114x114.png">
	<!-- Chrome, Firefox OS and Opera -->
	<meta name="theme-color" content="#263959">
	<!-- Windows Phone -->
	<meta name="msapplication-navbutton-color" content="#263959">
	<!-- iOS Safari -->
	<meta name="apple-mobile-web-app-status-bar-style" content="#263959">
	<!-- Google Fonts -->
	<link href="https://fonts.googleapis.com/css?family=PT+Serif:400,700" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css?family=Lato:300,400,700" rel="stylesheet">
	<!-- Font Awesome -->
	<link rel="stylesheet" href="/assets/fonts/font-awesome/css/font-awesome.min.css">
	<!-- Styles -->
	<link rel="stylesheet" href="/assets/css/main.css">
</head>

<body>

  <div class="wrapper">
    <aside class="sidebar">
  <header>
    <div class="about">
      <div class="cover-author-image">
        <a href="/"><img src="/assets/img/david-freeman.jpg" alt="Cabinet of Curiosity"></a>
      </div>
      <div class="author-name">Cabinet of Curiosity</div>
      <p>Exploring the data of natural history</p>
    </div>
  </header> <!-- End Header -->
  <footer>
    <section class="contact">
      <h3 class="contact-title">About</h3>
      <center><p><a href="/about" target="_blank"><img src="/assets/img/about_icon.png" alt="" height="18" width="18" </a></a></p></center>
    </section>
    <section class="contact">
      <h3 class="contact-title">Contact Us</h3>
      <ul>
        
          <li><a href="https://twitter.com/ofcuriositydata" target="_blank"><i class="fa fa-twitter" aria-hidden="true"></i></a></li>
        
        
          <li class="github"><a href="http://github.com/cabinetofcuriosity" target="_blank"><i class="fa fa-github"></i></a></li>
        
        
          <li class="email"><a href="mailto:ofcuriositydata"><i class="fa fa-envelope-o"></i></a></li>
        
      </ul>
    </section> <!-- End Section Contact -->
    <div class="copyright">
      <p>2018 &copy; Cabinet of Curiosity</p>
    </div>
  </footer> <!-- End Footer -->
</aside> <!-- End Sidebar -->
<div class="content-box clearfix">
  <article class="article-page">
  <div class="page-content">
    
    <div class="page-cover-image">
      <img class="page-image" src=/assets/img/wolf_BHL.jpg alt="Movebank Part II: tracking animal movement in time and space">
    </div> <!-- End Page Cover Image -->
    
    <div class="wrap-content">
      <header class="header-page">
        <h1 class="page-title">Movebank Part II: tracking animal movement in time and space</h1>
        <div class="page-date"><span>2018, Apr 17&nbsp;&nbsp;&nbsp;&nbsp;</span></div>
      </header>
      <p>In my <a href="https://cabinetofcuriosity.github.io/cabinetofcuriosity_site/movebank-part1/">previous post</a>, I talked about the awesome data resource that is Movebank, and how I acquired data from that source. 
I gathered data on a pack of jackals, collected in Namibia from 2009 to 2011, and did a bit of general summarizing.</p>

<p>In this post we’ll start getting down and dirty with parsing and categorizing the data in this data set. We will explore the <a href="http://www.cyclismo.org/tutorial/R/time.html">POSIXct data type</a>, which is a useful way of representing time in R. 
Since dealing with time series data across spatial ranges can be bit tricky, I  will also present some useful strategies I learned that can hopefully be useful to others who wish to track animal movement data.
I’m going to continue with the data set from Part 1 of this post, which you can find here: <a href="https://cabinetofcuriosity.github.io/cabinetofcuriosity_site/assets/downloads/black-backed-jackal-Namibia.csv">black-backed-jackal-Namibia.csv</a></p>

<h1 id="set-up">Set Up</h1>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">library</span><span class="p">(</span><span class="n">tidyverse</span><span class="p">)</span><span class="w">
</span><span class="n">library</span><span class="p">(</span><span class="n">ggmap</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<p>I <strong>really</strong> love tidyverse since I started using it about a year ago. But I’m always learning more.</p>

<p>I recently learned that the tidyverse function <code class="highlighter-rouge">read_csv()</code> behaves differently from the base R function <code class="highlighter-rouge">read.csv()</code>.
It probably does so in a few ways, but I now prefer the <code class="highlighter-rouge">read_csv()</code> from tidyverse for a few reasons: it does not make character strings into factors, 
and here it automatically formats the timestamp variable into a POSIXct data type.
If you’re new to R, don’t worry about this right now - just know that this may be saving you some hassle.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">jackals</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">read_csv</span><span class="p">(</span><span class="s2">"../2018-04-03_movebank_part1/data/black-backed-jackal-Namibia.csv"</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>## Parsed with column specification:
## cols(
##   sensor_type_id = col_integer(),
##   location_lat = col_double(),
##   location_long = col_double(),
##   timestamp = col_datetime(format = ""),
##   update_ts = col_datetime(format = ""),
##   deployment_id = col_integer(),
##   event_id = col_double(),
##   tag_id = col_integer(),
##   sensor_type = col_character(),
##   local_identifier = col_character()
## )
</code></pre></div></div>

<p>A quick reminder of what is in this data set.</p>

<p>This is a data.frame object with 130686 rows, where each row is an independent event record of a latitude and longitude reading from a GPS device attached to one of 22 individuals.
Each event has a timestamp, and event_id, a latitude, a longitude, and a code to identify which individual the data point is associated with.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">colnames</span><span class="p">(</span><span class="n">jackals</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>##  [1] "sensor_type_id"   "location_lat"     "location_long"   
##  [4] "timestamp"        "update_ts"        "deployment_id"   
##  [7] "event_id"         "tag_id"           "sensor_type"     
## [10] "local_identifier"
</code></pre></div></div>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">head</span><span class="p">(</span><span class="n">jackals</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>## # A tibble: 6 x 10
##   sensor_type_id location_lat location_long timestamp          
##            &lt;int&gt;        &lt;dbl&gt;         &lt;dbl&gt; &lt;dttm&gt;             
## 1            653        -19.1          15.8 2009-02-07 00:01:20
## 2            653        -19.1          15.8 2009-02-07 01:00:38
## 3            653        -19.1          15.8 2009-02-07 02:00:38
## 4            653        -19.1          15.8 2009-02-07 03:00:45
## 5            653        -19.0          15.8 2009-02-07 04:00:50
## 6            653        -19.0          15.8 2009-02-07 05:00:38
## # ... with 6 more variables: update_ts &lt;dttm&gt;, deployment_id &lt;int&gt;,
## #   event_id &lt;dbl&gt;, tag_id &lt;int&gt;, sensor_type &lt;chr&gt;,
## #   local_identifier &lt;chr&gt;
</code></pre></div></div>

<h3 id="mapping-object">Mapping object</h3>

<p>Here, for plotting and mapping purposes, I’m going to make a map object for the points I’ll be plotting.
You can do this independently for any subset of the jackals data that you would like, but I have found that I like to plot the individuals on a map the same size as the whole data set so that I can understand the scope of the individual’s data compared to the whole.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">## preparing the map for output later</span><span class="w">
</span><span class="n">jackals_bbox</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">make_bbox</span><span class="p">(</span><span class="n">lon</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">location_long</span><span class="p">,</span><span class="w"> </span><span class="n">lat</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">location_lat</span><span class="p">,</span><span class="w"> </span><span class="n">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">jackals</span><span class="p">,</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0.1</span><span class="p">)</span><span class="w">
</span><span class="n">jackals_map</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">get_map</span><span class="p">(</span><span class="n">location</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">jackals_bbox</span><span class="p">,</span><span class="w"> </span><span class="n">maptype</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'terrain'</span><span class="p">,</span><span class="w"> </span><span class="n">source</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'google'</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>## Source : https://maps.googleapis.com/maps/api/staticmap?center=-19.05947,15.77308&amp;zoom=10&amp;size=640x640&amp;scale=2&amp;maptype=terrain&amp;language=en-EN
</code></pre></div></div>

<p>I’ll be using this map to plot all points I’ve subsetted from the jackals data set bellow, unless otherwise stated.</p>

<h1 id="re-introduction-to-the-data">Re-introduction to the data</h1>

<p>We can first just use the individual identifiers to do some analysis on the data set, before we get into discussing and parsing the timestamp variable.</p>

<p>Each individual jackal can have different number of GPS events recorded. I can show this in two ways, along with some other summarizing statistics about the GPS.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">individual_summary</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">jackals</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
  </span><span class="n">group_by</span><span class="p">(</span><span class="n">local_identifier</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
  </span><span class="n">summarise</span><span class="p">(</span><span class="n">number_of_events</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">n_distinct</span><span class="p">(</span><span class="n">event_id</span><span class="p">),</span><span class="w"> 
            </span><span class="n">Longitude_min</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">min</span><span class="p">(</span><span class="n">location_long</span><span class="p">),</span><span class="w">
            </span><span class="n">Longitude_max</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">max</span><span class="p">(</span><span class="n">location_long</span><span class="p">),</span><span class="w">
            </span><span class="n">Latitude_min</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">min</span><span class="p">(</span><span class="n">location_lat</span><span class="p">),</span><span class="w">
            </span><span class="n">Latitude_max</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">max</span><span class="p">(</span><span class="n">location_long</span><span class="p">))</span><span class="w">
</span><span class="n">head</span><span class="p">(</span><span class="n">individual_summary</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>## # A tibble: 6 x 6
##   local_identifier number_of_events Longitude_min Longitude_max
##   &lt;chr&gt;                       &lt;int&gt;         &lt;dbl&gt;         &lt;dbl&gt;
## 1 CM05                         1873          15.7          15.9
## 2 CM08                         3374          15.6          15.8
## 3 CM09                        11827          15.6          16.0
## 4 CM10                         1235          15.7          15.8
## 5 CM11                        11508          15.5          15.9
## 6 CM15                        11148          15.9          16.1
## # ... with 2 more variables: Latitude_min &lt;dbl&gt;, Latitude_max &lt;dbl&gt;
</code></pre></div></div>

<p>It’s hard to interpret the latitude and longitude summarizing statistics, because I don’t have a very intuitive sense of how those grid numbers convert to a distance metric I do have intuitive sense for. This is perhaps a good topic for a future post!</p>

<p>But, we did see from the map last week and this summary table that they are pretty tight knit - it is, after all, a pack of jackals.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">ggmap</span><span class="p">(</span><span class="n">jackals_map</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> 
  </span><span class="n">geom_point</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">jackals</span><span class="p">,</span><span class="w"> </span><span class="n">aes</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">location_long</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="o">=</span><span class="n">location_lat</span><span class="p">))</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">ggtitle</span><span class="p">(</span><span class="s2">"Twenty-Two Jackals"</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<p><img src="../assets/img/2018-04-12_movebank_part2_files/figure-html/unnamed-chunk-6-1.png" alt="" /><!-- --></p>

<p>There is a great deal of overplotting there. There are 22 individuals over 3 years in there (2009 - 2011) and more 130,000 points, so we’re not going to be able to see much here without teasing that black clump of dots apart a bit.</p>

<p>I’m also going to take a bit of time to play around the <code class="highlighter-rouge">geom_path</code> function of ggplot2, because I used to have trouble getting the arguments right.</p>

<p>To do this, I’m going to graph the points of one individual jackal, CM18, which has fewer data points (around 800, compared to say, 11,000), and they are spread out, which will make it easier to see what is going on.
CM18 only had data collected for three months in 2009.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">CM18</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">jackals</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
  </span><span class="n">filter</span><span class="p">(</span><span class="n">local_identifier</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">"CM18"</span><span class="p">)</span><span class="w">

</span><span class="n">ggmap</span><span class="p">(</span><span class="n">jackals_map</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">geom_point</span><span class="p">(</span><span class="n">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">CM18</span><span class="p">,</span><span class="w"> </span><span class="n">aes</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">location_long</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">location_lat</span><span class="p">,</span><span class="w"> </span><span class="n">color</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">timestamp</span><span class="p">))</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">ggtitle</span><span class="p">(</span><span class="s2">"Jackal CM18, Feruary - April 2009"</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<p><img src="../assets/img/2018-04-12_movebank_part2_files/figure-html/unnamed-chunk-7-1.png" alt="" /><!-- --></p>

<p>Here, I’m using the <code class="highlighter-rouge">timestamp</code> variable to add information to the jackal’s movement as a continuous variable.</p>

<p>The two obvious ggplot2 options are <code class="highlighter-rouge">geom_line()</code> and <code class="highlighter-rouge">geom_path()</code>. The important distinction is how each of these functions connects the data.</p>

<p><code class="highlighter-rouge">geom_line()</code> connects the data in the order that is plotted along the x-axis.
This is not useful for us in the sense of mapping where the jackal moved over time, as you can see below:</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">CM18</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
  </span><span class="n">ggplot</span><span class="p">(</span><span class="n">aes</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">location_long</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">location_lat</span><span class="p">))</span><span class="w"> </span><span class="o">+</span><span class="w"> 
    </span><span class="n">geom_point</span><span class="p">(</span><span class="n">aes</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="n">timestamp</span><span class="p">))</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">geom_line</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">ggtitle</span><span class="p">(</span><span class="s2">"Incorrect connection of location points with geom_line()"</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<p><img src="../assets/img/2018-04-12_movebank_part2_files/figure-html/unnamed-chunk-8-1.png" alt="" /><!-- --></p>

<p>This does not make any sense. It might make sense if a time were on the x-axis.</p>

<p>Instead we want to use <code class="highlighter-rouge">geom_path()</code>. <code class="highlighter-rouge">geom_path()</code> connects the data of a group in the order that it appears in the data frame.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">CM18</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
  </span><span class="n">ggplot</span><span class="p">(</span><span class="n">aes</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">location_long</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">location_lat</span><span class="p">))</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">geom_point</span><span class="p">(</span><span class="n">aes</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="n">timestamp</span><span class="p">))</span><span class="o">+</span><span class="w"> </span><span class="n">geom_path</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">ggtitle</span><span class="p">(</span><span class="s2">"CM18: connection of jackal location data over time"</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<p><img src="../assets/img/2018-04-12_movebank_part2_files/figure-html/unnamed-chunk-9-1.png" alt="" /><!-- --></p>

<p>There still seems to be some path connections that don’t make intuitive sense, but this is getting close to what I want. We’ll be able to tease apart the movement more when we parse the <code class="highlighter-rouge">timestamp</code> variable.</p>

<h1 id="parsing-out-dates-with-lubridate">Parsing out dates with <code class="highlighter-rouge">lubridate</code></h1>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">library</span><span class="p">(</span><span class="n">lubridate</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<p>Because I used the tidyverse function <code class="highlighter-rouge">read_csv()</code> to load in my data, the timestamp variable is already of a class POSIXct variable. 
If you used the base function <code class="highlighter-rouge">read.csv()</code> to load the data from, it will be a character vector, or a factor, depending on how your configured your arguments.
If your timestamp variable is character vector, run the below code to change it to a class POSIXct variable.
Variables of the class POSIXct are useful because R recognizes this class as either a date or a date-time variable.
To make this character vector a POSIXct vector, I would use lubridate’s <code class="highlighter-rouge">ymd_hms()</code> function.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">#only run this is the timestamp variable is a character!</span><span class="w">
</span><span class="n">str</span><span class="p">(</span><span class="n">jackals</span><span class="o">$</span><span class="n">timestamp</span><span class="p">)</span><span class="w">
</span><span class="n">jackals</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">jackals</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
  </span><span class="n">transform</span><span class="p">(</span><span class="n">timestamp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ymd_hms</span><span class="p">(</span><span class="n">timestamp</span><span class="p">))</span><span class="w">
</span><span class="n">str</span><span class="p">(</span><span class="n">jackals</span><span class="o">$</span><span class="n">timestamp</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<p>This is useful, but I also want to break out the timestamp variable in to pieces - year, month, hour, and day of the year (<code class="highlighter-rouge">yday</code>).</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">jackals</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">jackals</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
  </span><span class="n">mutate</span><span class="p">(</span><span class="n">year</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">year</span><span class="p">(</span><span class="n">timestamp</span><span class="p">),</span><span class="w">
         </span><span class="n">month</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">month</span><span class="p">(</span><span class="n">timestamp</span><span class="p">),</span><span class="w">
         </span><span class="n">month_label</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">month</span><span class="p">(</span><span class="n">timestamp</span><span class="p">,</span><span class="w"> </span><span class="n">label</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">TRUE</span><span class="p">),</span><span class="w">
         </span><span class="n">yday</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">yday</span><span class="p">(</span><span class="n">timestamp</span><span class="p">),</span><span class="w">
         </span><span class="n">hour</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">hour</span><span class="p">(</span><span class="n">timestamp</span><span class="p">))</span><span class="w">
</span><span class="n">jackals</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="n">head</span><span class="p">()</span><span class="w">
</span></code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>## # A tibble: 6 x 15
##   sensor_type_id location_lat location_long timestamp          
##            &lt;int&gt;        &lt;dbl&gt;         &lt;dbl&gt; &lt;dttm&gt;             
## 1            653        -19.1          15.8 2009-02-07 00:01:20
## 2            653        -19.1          15.8 2009-02-07 01:00:38
## 3            653        -19.1          15.8 2009-02-07 02:00:38
## 4            653        -19.1          15.8 2009-02-07 03:00:45
## 5            653        -19.0          15.8 2009-02-07 04:00:50
## 6            653        -19.0          15.8 2009-02-07 05:00:38
## # ... with 11 more variables: update_ts &lt;dttm&gt;, deployment_id &lt;int&gt;,
## #   event_id &lt;dbl&gt;, tag_id &lt;int&gt;, sensor_type &lt;chr&gt;,
## #   local_identifier &lt;chr&gt;, year &lt;dbl&gt;, month &lt;dbl&gt;, month_label &lt;ord&gt;,
## #   yday &lt;dbl&gt;, hour &lt;int&gt;
</code></pre></div></div>

<p>Now, I can do some nifty plotting with facets to compare across months and years. 
We’ll take another look at one individual jackal, CM18.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># because we mutated the jackal data.frame, we must recreate the CM18 data.frame</span><span class="w">
</span><span class="n">CM18</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">jackals</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
  </span><span class="n">filter</span><span class="p">(</span><span class="n">local_identifier</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">"CM18"</span><span class="p">)</span><span class="w"> 

</span><span class="n">ggmap</span><span class="p">(</span><span class="n">jackals_map</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> 
  </span><span class="n">geom_point</span><span class="p">(</span><span class="n">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">CM18</span><span class="p">,</span><span class="w"> </span><span class="n">aes</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">location_long</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">location_lat</span><span class="p">,</span><span class="w"> </span><span class="n">color</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">hour</span><span class="p">),</span><span class="w"> </span><span class="n">alpha</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0.5</span><span class="p">,</span><span class="w"> </span><span class="n">size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">facet_wrap</span><span class="p">(</span><span class="o">~</span><span class="n">month_label</span><span class="o">*</span><span class="n">year</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">scale_color_gradient2</span><span class="p">(</span><span class="n">low</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"dark grey"</span><span class="p">,</span><span class="w"> </span><span class="n">mid</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"red"</span><span class="p">,</span><span class="w"> </span><span class="n">high</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"dark grey"</span><span class="p">,</span><span class="w"> </span><span class="n">midpoint</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">12</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">theme</span><span class="p">(</span><span class="n">strip.text.x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">element_text</span><span class="p">(</span><span class="n">size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">16</span><span class="p">),</span><span class="w"> </span><span class="n">axis.text</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">element_text</span><span class="p">(</span><span class="n">size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">12</span><span class="p">))</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">ggtitle</span><span class="p">(</span><span class="s2">"CM18: Monthly Movement"</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<p><img src="../assets/img/2018-04-12_movebank_part2_files/figure-html/unnamed-chunk-13-1.png" alt="" /><!-- --></p>

<p>Here, I’ve colored the points so that the darker the red, the more toward the middle of the day.</p>

<p>But it’s really hard to see much, so if we use jackal CM44 (who has data points over a span of two years), we can show the month using color.
However, this does not get rid of the over-plotting issue - which we may not be able to get rid of with this data set. It turns out that these jackals don’t move very far.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">CM44</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">jackals</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
  </span><span class="n">filter</span><span class="p">(</span><span class="n">local_identifier</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">"CM44"</span><span class="p">)</span><span class="w">

</span><span class="n">ggmap</span><span class="p">(</span><span class="n">jackals_map</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> 
  </span><span class="n">geom_point</span><span class="p">(</span><span class="n">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">CM44</span><span class="p">,</span><span class="w"> </span><span class="n">aes</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">location_long</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">location_lat</span><span class="p">,</span><span class="w"> </span><span class="n">color</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">month_label</span><span class="p">),</span><span class="w"> </span><span class="n">alpha</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0.5</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> 
  </span><span class="n">facet_wrap</span><span class="p">(</span><span class="o">~</span><span class="w"> </span><span class="n">year</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">ggtitle</span><span class="p">(</span><span class="s2">"CM44: Yearly Movement"</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">  </span><span class="n">theme</span><span class="p">(</span><span class="n">strip.text.x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">element_text</span><span class="p">(</span><span class="n">size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">12</span><span class="p">))</span><span class="w">
</span></code></pre></div></div>

<p><img src="../assets/img/2018-04-12_movebank_part2_files/figure-html/unnamed-chunk-14-1.png" alt="" /><!-- --></p>

<p>Or we can look at an individual and a specific month, and use <code class="highlighter-rouge">geom_path()</code> to track each day’s movement.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">CM18_march</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">jackals</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
  </span><span class="n">filter</span><span class="p">(</span><span class="n">local_identifier</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">"CM18"</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">month</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="m">3</span><span class="p">)</span><span class="w">

</span><span class="n">ggmap</span><span class="p">(</span><span class="n">jackals_map</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
    </span><span class="n">geom_point</span><span class="p">(</span><span class="n">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">CM18_march</span><span class="p">,</span><span class="w"> </span><span class="n">aes</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">location_long</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">location_lat</span><span class="p">,</span><span class="w"> </span><span class="n">group</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">yday</span><span class="p">,</span><span class="n">color</span><span class="o">=</span><span class="n">hour</span><span class="p">),</span><span class="w"> </span><span class="n">alpha</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0.5</span><span class="p">,</span><span class="w"> </span><span class="n">size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">2</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
    </span><span class="n">geom_path</span><span class="p">(</span><span class="n">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">CM18_march</span><span class="p">,</span><span class="w"> </span><span class="n">aes</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">location_long</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">location_lat</span><span class="p">,</span><span class="w"> </span><span class="n">group</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">yday</span><span class="p">))</span><span class="w"> </span><span class="o">+</span><span class="w"> 
  </span><span class="n">facet_wrap</span><span class="p">(</span><span class="o">~</span><span class="n">yday</span><span class="p">,</span><span class="w"> </span><span class="n">nrow</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">4</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">scale_color_gradient2</span><span class="p">(</span><span class="n">low</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"dark grey"</span><span class="p">,</span><span class="w"> </span><span class="n">mid</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"red"</span><span class="p">,</span><span class="w"> </span><span class="n">high</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"dark grey"</span><span class="p">,</span><span class="w"> </span><span class="n">midpoint</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">12</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">theme</span><span class="p">(</span><span class="n">strip.text.x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">element_text</span><span class="p">(</span><span class="n">size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">12</span><span class="p">),</span><span class="w"> </span><span class="n">axis.text.y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">element_text</span><span class="p">(</span><span class="n">size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">12</span><span class="p">))</span><span class="w">
</span></code></pre></div></div>

<p><img src="../assets/img/2018-04-12_movebank_part2_files/figure-html/unnamed-chunk-15-1.png" alt="" /><!-- --></p>

<p>Let’s zoom in on a specific day, to get some sense of how this jackal might be moving.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">CM18_march</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">jackals</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
  </span><span class="n">filter</span><span class="p">(</span><span class="n">local_identifier</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">"CM18"</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">yday</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="m">71</span><span class="p">)</span><span class="w">

</span><span class="n">ggmap</span><span class="p">(</span><span class="n">jackals_map</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
    </span><span class="n">geom_point</span><span class="p">(</span><span class="n">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">CM18_march</span><span class="p">,</span><span class="w"> </span><span class="n">aes</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">location_long</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">location_lat</span><span class="p">,</span><span class="w"> </span><span class="n">group</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">yday</span><span class="p">,</span><span class="n">color</span><span class="o">=</span><span class="n">hour</span><span class="p">),</span><span class="w"> </span><span class="n">alpha</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0.4</span><span class="p">,</span><span class="w"> </span><span class="n">size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
    </span><span class="n">geom_path</span><span class="p">(</span><span class="n">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">CM18_march</span><span class="p">,</span><span class="w"> </span><span class="n">aes</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">location_long</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">location_lat</span><span class="p">,</span><span class="w"> </span><span class="n">group</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">yday</span><span class="p">))</span><span class="w">  </span><span class="o">+</span><span class="w"> </span><span class="n">scale_color_gradient2</span><span class="p">(</span><span class="n">low</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"dark grey"</span><span class="p">,</span><span class="w"> </span><span class="n">mid</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"red"</span><span class="p">,</span><span class="w"> </span><span class="n">high</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"dark grey"</span><span class="p">,</span><span class="w"> </span><span class="n">midpoint</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">12</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<p><img src="../assets/img/2018-04-12_movebank_part2_files/figure-html/unnamed-chunk-16-1.png" alt="" /><!-- --></p>

<p>Here we can see that there are indeed some hours where the jackal moves quite rapidly, compared to others.
Between the hours of 6am and noon, the jackal made a quick trip out.
And other hours of the day the jackal spends in a single location, perhaps hunkering down to avoid the heat and to sleep.</p>

<h1 id="jackals-in-april">Jackals in April</h1>

<p>Let’s do some summarizing of the data.</p>

<p>How many data points were collected for each year? For each individual?</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">jackals</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
  </span><span class="n">group_by</span><span class="p">(</span><span class="n">year</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
  </span><span class="n">tally</span><span class="p">()</span><span class="w">
</span></code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>## # A tibble: 3 x 2
##    year     n
##   &lt;dbl&gt; &lt;int&gt;
## 1 2009. 78506
## 2 2010. 51872
## 3 2011.   308
</code></pre></div></div>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">jackals</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
  </span><span class="n">group_by</span><span class="p">(</span><span class="n">year</span><span class="p">,</span><span class="w"> </span><span class="n">month_label</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
  </span><span class="n">summarise</span><span class="p">(</span><span class="n">n_individuals</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">n_distinct</span><span class="p">(</span><span class="n">local_identifier</span><span class="p">))</span><span class="w">
</span></code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>## # A tibble: 24 x 3
## # Groups:   year [?]
##     year month_label n_individuals
##    &lt;dbl&gt; &lt;ord&gt;               &lt;int&gt;
##  1 2009. Feb                     8
##  2 2009. Mar                    11
##  3 2009. Apr                    15
##  4 2009. May                    13
##  5 2009. Jun                    10
##  6 2009. Jul                    11
##  7 2009. Aug                     9
##  8 2009. Sep                     8
##  9 2009. Oct                     8
## 10 2009. Nov                     8
## # ... with 14 more rows
</code></pre></div></div>

<p>But, the year 2009 had the most data collected overall, and the month of April in 2009 had the most individuals with sensors. 
But if we plot that number of individuals with sensors over time…</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">jackals</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
  </span><span class="n">mutate</span><span class="p">(</span><span class="n">ym</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">parse_date_time</span><span class="p">(</span><span class="n">format</span><span class="p">(</span><span class="n">timestamp</span><span class="p">,</span><span class="w"> </span><span class="s2">"%Y-%m"</span><span class="p">),</span><span class="w"> </span><span class="n">orders</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Ym"</span><span class="p">))</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> 
  </span><span class="n">group_by</span><span class="p">(</span><span class="n">ym</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
  </span><span class="n">summarise</span><span class="p">(</span><span class="n">n_individuals</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">n_distinct</span><span class="p">(</span><span class="n">local_identifier</span><span class="p">))</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
  </span><span class="n">ggplot</span><span class="p">(</span><span class="n">aes</span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ym</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">n_individuals</span><span class="p">))</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">geom_line</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">xlab</span><span class="p">(</span><span class="s2">"Time"</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<p><img src="../assets/img/2018-04-12_movebank_part2_files/figure-html/unnamed-chunk-18-1.png" alt="" /><!-- --></p>

<p>Hm, it looks like there is a story of dwindling numbers here, or a end to the study and the deployment of new sensors.</p>

<p>Let’s focus on the month of April 2009, and look at their movement.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">apr2009</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">jackals</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
  </span><span class="n">filter</span><span class="p">(</span><span class="n">year</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="m">2009</span><span class="p">,</span><span class="w"> </span><span class="n">month</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="m">4</span><span class="p">)</span><span class="w">

</span><span class="n">ggmap</span><span class="p">(</span><span class="n">jackals_map</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> 
  </span><span class="n">geom_point</span><span class="p">(</span><span class="n">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">apr2009</span><span class="p">,</span><span class="w"> </span><span class="n">aes</span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">location_long</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">location_lat</span><span class="p">,</span><span class="w"> </span><span class="n">color</span><span class="o">=</span><span class="n">local_identifier</span><span class="p">),</span><span class="w"> </span><span class="n">alpha</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0.5</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">ggtitle</span><span class="p">(</span><span class="s2">"Jackals in April 2009"</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<p><img src="../assets/img/2018-04-12_movebank_part2_files/figure-html/unnamed-chunk-19-1.png" alt="" /><!-- --></p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">ggmap</span><span class="p">(</span><span class="n">jackals_map</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> 
  </span><span class="n">geom_point</span><span class="p">(</span><span class="n">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">apr2009</span><span class="p">,</span><span class="w"> </span><span class="n">aes</span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">location_long</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">location_lat</span><span class="p">,</span><span class="w"> </span><span class="n">color</span><span class="o">=</span><span class="n">local_identifier</span><span class="p">),</span><span class="w"> </span><span class="n">alpha</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0.5</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">facet_wrap</span><span class="p">(</span><span class="o">~</span><span class="n">yday</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">theme</span><span class="p">(</span><span class="n">strip.text.x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">element_text</span><span class="p">(</span><span class="n">size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">12</span><span class="p">),</span><span class="w"> </span><span class="n">legend.text</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">element_text</span><span class="p">(</span><span class="n">size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">15</span><span class="p">))</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">ggtitle</span><span class="p">(</span><span class="s2">"April 2009, by day"</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<p><img src="../assets/img/2018-04-12_movebank_part2_files/figure-html/unnamed-chunk-20-1.png" alt="" /><!-- --></p>

<p>It’s interesting that even in a relatively small space, the jackals actually keep fairly separate and don’t seem to actually be in a pack. Or behaving in a pack behaviors as I understand them or think about them, like with coyotes or wolves. But I’m also a plant biologist by training, so… &amp;shrug&amp;</p>

<p>And let’s just break down a single day</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">aprl2009</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">jackals</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
  </span><span class="n">filter</span><span class="p">(</span><span class="n">year</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="m">2009</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">yday</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="m">118</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
  </span><span class="n">mutate</span><span class="p">(</span><span class="n">time_of_day</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ifelse</span><span class="p">(</span><span class="n">hour</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="m">10</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">hour</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="m">4</span><span class="p">,</span><span class="w"> </span><span class="s2">"morning"</span><span class="p">,</span><span class="w"> </span><span class="n">ifelse</span><span class="p">(</span><span class="n">hour</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="m">10</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">hour</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="m">16</span><span class="p">,</span><span class="w"> </span><span class="s2">"midday"</span><span class="p">,</span><span class="w"> </span><span class="n">ifelse</span><span class="p">(</span><span class="n">hour</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="m">16</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">hour</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="m">20</span><span class="p">,</span><span class="w"> </span><span class="s2">"evening"</span><span class="p">,</span><span class="w"> </span><span class="s2">"night"</span><span class="p">))))</span><span class="w">
</span></code></pre></div></div>

<p>Man, that is a confusing series of <code class="highlighter-rouge">ifelse()</code> statements. But what I am doing is conditionally filling in a new column, called <code class="highlighter-rouge">time_of_day</code> where I have made time more categorical rather than continuous. 
Between the hours of 4am and 10am, it is “morning”, then between 10am and 4pm it is “midday””, and then between 4pm and 8pm it is “evening”, and the time between 8pm and 4am it is “night”.</p>

<p>Now that I have binned time into categories, I can also plot by these categories.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">ggmap</span><span class="p">(</span><span class="n">jackals_map</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">geom_point</span><span class="p">(</span><span class="n">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">aprl2009</span><span class="p">,</span><span class="w"> </span><span class="n">aes</span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">location_long</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">location_lat</span><span class="p">,</span><span class="w"> </span><span class="n">color</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">local_identifier</span><span class="p">),</span><span class="w"> </span><span class="n">alpha</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0.5</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">facet_wrap</span><span class="p">(</span><span class="o">~</span><span class="n">time_of_day</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">ggtitle</span><span class="p">(</span><span class="s2">"A day in April 2009"</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<p><img src="../assets/img/2018-04-12_movebank_part2_files/figure-html/unnamed-chunk-22-1.png" alt="" /><!-- --></p>

<p>Cool! When I bin the time like this I can see that the jackals are the most active at night, the least active during the midday, and middling-ly active in the morning and in the evening.</p>

<h1 id="summary">Summary</h1>

<p>We learned a lot in this blog post. A lot about the jackals, and a lot about how to parse and categorize data.</p>

<p>Here’s a quick summary:</p>

<ul>
  <li>I used <code class="highlighter-rouge">read_csv()</code> to format my data from the get-go. No factors, and the <code class="highlighter-rouge">timestamp</code> variable is a POSIXct variable already</li>
  <li>I took a look at various ways to plot the movement of one jackal - with <code class="highlighter-rouge">geom_path()</code> and using facets</li>
  <li>I parsed the <code class="highlighter-rouge">timestamp</code> variable into single variables such as month, year, day of the year, and hour with <code class="highlighter-rouge">lubridate</code></li>
  <li>I looked at the whole pack at a time stamp, and found that the pack remained fairly separate</li>
  <li>I made a continuous variable discrete by binning it into categories</li>
  <li>I looked at movement over a short period of time, and observed that the jackals move the least during midday</li>
</ul>

<p>This is fun exploratory work. In our next post, Ciera and I will use these general observations to do some analysis of this pack.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">sessionInfo</span><span class="p">()</span><span class="w">
</span></code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>## R version 3.3.0 (2016-05-03)
## Platform: x86_64-apple-darwin13.4.0 (64-bit)
## Running under: OS X 10.11.6 (El Capitan)
## 
## locale:
## [1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8
## 
## attached base packages:
## [1] stats     graphics  grDevices utils     datasets  methods   base     
## 
## other attached packages:
##  [1] lubridate_1.7.4 bindrcpp_0.2.2  ggmap_2.7.900   forcats_0.3.0  
##  [5] stringr_1.3.0   dplyr_0.7.4     purrr_0.2.4     readr_1.1.1    
##  [9] tidyr_0.8.0     tibble_1.4.2    ggplot2_2.2.1   tidyverse_1.2.1
## 
## loaded via a namespace (and not attached):
##  [1] reshape2_1.4.3    haven_1.1.1       lattice_0.20-35  
##  [4] colorspace_1.3-2  htmltools_0.3.6   yaml_2.1.18      
##  [7] utf8_1.1.3        rlang_0.2.0       pillar_1.2.1     
## [10] foreign_0.8-69    glue_1.2.0        modelr_0.1.1     
## [13] readxl_1.0.0      jpeg_0.1-8        bindr_0.1.1      
## [16] plyr_1.8.4        munsell_0.4.3     gtable_0.2.0     
## [19] cellranger_1.1.0  rvest_0.3.2       RgoogleMaps_1.4.1
## [22] psych_1.8.3.3     evaluate_0.10.1   labeling_0.3     
## [25] knitr_1.20        parallel_3.3.0    broom_0.4.4      
## [28] Rcpp_0.12.16      scales_0.5.0      backports_1.1.2  
## [31] jsonlite_1.5      mnormt_1.5-5      rjson_0.2.15     
## [34] hms_0.4.2         png_0.1-7         digest_0.6.15    
## [37] stringi_1.1.7     grid_3.3.0        rprojroot_1.3-2  
## [40] cli_1.0.0         tools_3.3.0       bitops_1.0-6     
## [43] magrittr_1.5      lazyeval_0.2.1    crayon_1.3.4     
## [46] pkgconfig_2.0.1   xml2_1.2.0        assertthat_0.2.0 
## [49] rmarkdown_1.9     httr_1.3.1        rstudioapi_0.7   
## [52] R6_2.2.2          nlme_3.1-131
</code></pre></div></div>

      <div class="page-footer">
        <div class="page-share">
          <a href="https://twitter.com/intent/tweet?text=Movebank Part II: tracking animal movement in time and space&url=http://localhost:4000/movebank-part2/" title="Share on Twitter" rel="nofollow" target="_blank">Twitter</a>
          <a href="https://facebook.com/sharer.php?u=http://localhost:4000/movebank-part2/" title="Share on Facebook" rel="nofollow" target="_blank">Facebook</a>
          <a href="https://plus.google.com/share?url=http://localhost:4000/movebank-part2/" title="Share on Google+" rel="nofollow" target="_blank">Google+</a>
        </div>
        <div class="page-tag">
          
        </div>
      </div>
      <section class="comment-area">
  <div class="comment-wrapper">
    
    <div id="disqus_thread" class="article-comments"></div>
    <script>
      (function() {
          var d = document, s = d.createElement('script');
          s.src = '//cabinetofcuriosity.disqus.com/embed.js';
          s.setAttribute('data-timestamp', +new Date());
          (d.head || d.body).appendChild(s);
      })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    
  </div>
</section> <!-- End Comment Area -->

    </div> <!-- End Wrap Content -->
  </div> <!-- End Page Content -->
</article> <!-- End Article Page -->

</div>

  </div>
  
  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-116118773-1', 'auto');
  ga('send', 'pageview');
</script> <!-- End Analytics -->

</body>
</html>
